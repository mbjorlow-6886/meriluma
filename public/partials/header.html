<header class="site-header">
  <div class="max-w-6xl">
    <a href="/" class="logo-link" aria-label="MeriLuma hjem">
      <div class="logo-symbol">∞</div>
      <span class="logo-text">MeriLuma</span>
    </a>

    <!-- Hamburger (mobil) -->
    <button class="nav-toggle" aria-label="Meny" aria-expanded="false">
      <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="4" y1="6" x2="22" y2="6"></line>
        <line x1="4" y1="12" x2="22" y2="12"></line>
        <line x1="4" y1="18" x2="22" y2="18"></line>
      </svg>
    </button>

    <!-- Navigasjon -->
    <nav id="primary-nav" class="nav-links">
      <a href="/" data-match="/">Hjem</a>
      <a href="/yoga.html" data-match="/yoga">Yoga</a>
      <a href="/meditasjon.html" data-match="/meditasjon">Meditasjon</a>
      <a href="/meditasjons-pt.html" data-match="/meditasjons-pt">Meditasjons-PT</a>
      <a href="/kort.html" data-match="/kort">Kort</a>
      <a href="/om.html" data-match="/om">Om</a>
      <a href="/kontakt.html" data-match="/kontakt">Kontakt</a>
    </nav>
  </div>

  <!-- Script for logikk -->
  <script>
  (function(){
    const tryInit = () => {
      const header = document.querySelector('.site-header');
      const nav = document.getElementById('primary-nav');
      const toggle = document.querySelector('.nav-toggle');
      if (!header || !nav || !toggle) return false;

      // Åpne/lukke meny på mobil
      if (!toggle.dataset.bound) {
        toggle.addEventListener('click', () => {
          const open = nav.classList.toggle('open');
          toggle.setAttribute('aria-expanded', String(open));
        });
        toggle.dataset.bound = '1';
      }

      // Marker aktiv side
      const path = location.pathname.replace(/index\.html$/, '').toLowerCase();
      document.querySelectorAll('#primary-nav a[data-match]').forEach(a => {
        const match = a.getAttribute('data-match').toLowerCase();
        if (path === '/' && match === '/') a.classList.add('active');
        else if (path.startsWith(match) && match !== '/') a.classList.add('active');
      });

      // Skygge ved scroll
      const onScroll = () => {
        if (window.scrollY > 4) header.classList.add('shadow');
        else header.classList.remove('shadow');
      };
      onScroll();
      window.addEventListener('scroll', onScroll, { passive: true });

      return true;
    };

    if (tryInit()) return;
    document.addEventListener('DOMContentLoaded', tryInit);
    const mo = new MutationObserver(() => { if (tryInit()) mo.disconnect(); });
    mo.observe(document.documentElement, { childList: true, subtree: true });
  })();
  </script>
</header>
